services:
  shibboleth.path_access_subscriber:
    class: Drupal\shibboleth\EventSubscriber\ShibPathAccessSubscriber
    arguments: [ '@messenger' , '@shibboleth.path_access']
    tags:
      - { name: event_subscriber }

#  shibboleth.session:
#    class: Drupal\shibboleth\Authentication\ShibbolethSession
#    arguments: ['@config.factory']

  shibboleth.auth_manager:
    class: Drupal\shibboleth\Authentication\ShibbolethAuthManager
    arguments: [ '@config.factory', '@logger.channel.shibboleth', '@request_stack', '@current_user', '@messenger', '@current_route_match' ]

  shibboleth.drupal_auth_manager:
    class: Drupal\shibboleth\Authentication\ShibbolethDrupalAuthManager
    arguments: [ '@config.factory', '@entity_type.manager', '@logger.channel.shibboleth', '@shibboleth.auth_manager', '@session_manager', '@current_user', '@messenger' ]

#  shibboleth.path_access:
#    class: Drupal\shibboleth\ShibPath\ShibPathAccessChecker
#    arguments: [ '@config.factory', '@logger.channel.shibboleth', '@current_user', '@router.admin_context', '@module_handler', '@request_stack', '@messenger' ]

  shibboleth.path_access:
    class: Drupal\shibboleth\Access\ShibPathAccess
    arguments: [ '@entity_type.manager', '@session_manager', '@path.matcher', '@keyvalue', '@shibboleth.auth_manager' ]

  logger.channel.shibboleth:
    parent: logger.channel_base
    arguments: ['shibboleth']

#  shibboleth.session:
#    class: Drupal\shibboleth\Authentication\ShibbolethSession
#    arguments: ['@config.factory']

#  shibboleth.route_subscriber:
#    class: Drupal\shibboleth\EventSubscriber\ShibPathRouteSubscriber
#    arguments: [ '@entity_type.manager' ]
#    tags:
#      - { name: event_subscriber }
#
#  access_check.shibboleth.shib_path:
#    class: Drupal\shibboleth\Access\ShibPathAccessChecker
#    arguments: [ '@entity_type.manager', '@shibboleth.session', '@logger.channel.shibboleth' ]
#    tags:
#      - { name: access_check, applies_to: _shib_path_access }


